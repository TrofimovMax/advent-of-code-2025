# День 8: Игровая площадка

Оснащённый новым пониманием обслуживания телепорта, вы уверенно ступаете на отремонтированную телепортационную платформу.

Вы рематериализуетесь на незнакомой платформе и оказываетесь в огромном подземном пространстве, внутри которого находится гигантская игровая площадка!

По всей площадке группа эльфов работает над амбициозным проектом рождественских украшений. С помощью аккуратного подвешивания они разместили большое количество небольших электрических [распределительных коробок](https://en.wikipedia.org/wiki/Junction_box).

Их план — соединить коробки длинными гирляндами. Большинство коробок сами по себе не подают электричество; однако, когда две коробки соединены гирляндой, электричество может проходить между ними.

Эльфы пытаются понять, какие коробки нужно соединить, чтобы электричество достигало каждой коробки. У них даже есть список всех координат коробок в 3D-пространстве (ваш входной набор данных).

Например:
```
162,817,812
57,618,57
906,360,560
592,479,940
352,342,300
466,668,158
542,29,236
431,825,988
739,650,466
52,470,668
216,146,977
819,987,18
117,168,530
805,96,715
346,949,466
970,615,88
941,993,340
862,61,35
984,92,344
425,690,689
```

Этот список описывает положение 20 распределительных коробок, по одной в строке. Каждая позиция задаётся координатами X,Y,Z. Например, первая коробка имеет координаты X=162, Y=817, Z=812.

Чтобы сэкономить гирлянды, эльфы хотят сосредоточиться на соединении тех пар коробок, которые находятся как можно ближе друг к другу по прямой линии. В этом примере две ближайшие коробки — **162,817,812** и **425,690,689**.

Соединив эти две коробки, они становятся частью одной электрической цепи, поскольку электричество может между ними проходить. После соединения получается одна цепь из двух коробок, и остальные 18 коробок остаются отдельными цепями по одной коробке.

Теперь самые близкие две коробки, которые ещё не связаны напрямую — **162,817,812** и **431,825,988**. После соединения, поскольку 162,817,812 уже соединена с другой коробкой, теперь получается одна цепь из трёх коробок и ещё 17 цепей по одной коробке каждая.

Следующие две коробки, которые соединяются — **906,360,560** и **805,96,715**. После этого появляется цепь из 3 коробок, цепь из 2 коробок и 15 одиночных цепей.

Следующие две коробки — **431,825,988** и **425,690,689**. Так как они уже находятся в одной цепи, ничего не происходит!

Этот процесс продолжается некоторое время, и эльфы беспокоятся, что у них недостаточно удлинителей для всех этих цепей. Им нужно знать, насколько большими будут цепи.

После выполнения десяти самых коротких соединений остаётся **11 цепей**:
- одна цепь из **5** коробок,
- одна цепь из **4** коробок,
- две цепи по **2** коробки,
- и семь цепей по **1** коробке.

Перемножив размеры трёх самых больших цепей (5, 4 и одну цепь из 2), получим **40**.

Ваш список содержит много коробок; соедините **1000 пар** коробок, которые находятся ближе всего друг к другу. После этого — чему равно произведение размеров трёх крупнейших цепей?

## --- Часть вторая ---

Эльфы были правы: у них определённо не хватает удлинителей. Вам придётся продолжать соединять распределительные коробки до тех пор, пока все они не окажутся в одной большой цепи.

Продолжая приведённый выше пример, первое соединение, которое объединяет все коробки в одну цепь, происходит между коробками с координатами `216,146,977` и `117,168,530`. Эльфам нужно знать, как далеко эти коробки находятся от стены, чтобы выбрать правильный удлинитель; умножение X-координат этих двух коробок (216 и 117) даёт `25272`.

Продолжайте соединять ближайшие ещё не соединённые пары распределительных коробок, пока все они не окажутся в одной цепи. Каков результат умножения X-координат последних двух коробок, которые нужно соединить?
