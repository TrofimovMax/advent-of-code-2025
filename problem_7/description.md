--- День 7: Лаборатории ---
Вы благодарите головоногих за помощь и покидаете мусоросмеситель, оказываясь в знакомых коридорах исследовательского крыла Северного полюса.

По большому знаку «teleporter hub» видно, что здесь исследуют телепортацию; вы не удерживаетесь и пробуете телепорт сами, вставая на большую жёлтую платформу телепортера.

Вдруг вы оказываетесь в незнакомой комнате! В комнате нет дверей; единственный выход — телепорт. К сожалению, телепорт, похоже, протекает магическим дымом.

Так как это лаборатория телепортов, вокруг полно запасных частей, руководств и диагностического оборудования. Подключив один из диагностических приборов, вы получаете код ошибки 0H-N0, что, по-видимому, означает проблему с одним из тахионных коллекторов.

Вы быстро находите схему тахионного коллектора (ваш входной файл с головоломкой). Тахионный луч входит в коллектор в месте, помеченном S; тахионные лучи всегда движутся вниз. Тахионные лучи свободно проходят через пустое пространство (.). Однако если тахионный луч сталкивается с расщепителем (^), луч останавливается; вместо этого из непосредственной левой и правой ячеек от расщепителя продолжают исходить новые тахионные лучи.

Например:

```
.......S.......
...............
.......^.......
...............
......^.^......
...............
.....^.^.^.....
...............
....^.^...^....
...............
...^.^...^.^...
...............
..^...^.....^..
...............
.^.^.^.^.^...^.
...............
```

В этом примере входящий тахионный луч (|) простирается вниз от S, пока не достигнет первого расщепителя:
```
.......S.......
.......|.......
.......^.......
...............
......^.^......
...............
.....^.^.^.....
...............
....^.^...^....
...............
...^.^...^.^...
...............
..^...^.....^..
...............
.^.^.^.^.^...^.
...............
```

В этот момент оригинальный луч останавливается, и из расщепителя исходят два новых луча:
```
.......S.......
.......|.......
......|^|......
...............
......^.^......
...............
.....^.^.^.....
...............
....^.^...^....
...............
...^.^...^.^...
...............
..^...^.....^..
...............
.^.^.^.^.^...^.
...............
```

Эти лучи продолжают двигаться вниз, пока не достигнут новых расщепителей:
```
.......S.......
.......|.......
......|^|......
......|.|......
......^.^......
...............
.....^.^.^.....
...............
....^.^...^....
...............
...^.^...^.^...
...............
..^...^.....^..
...............
.^.^.^.^.^...^.
...............
```

В этот момент два расщепителя создают всего три тахионных луча, поскольку они оба направляют тахионы в одно и то же место между ними:
```
.......S.......
.......|.......
......|^|......
......|.|......
.....|^|^|.....
...............
.....^.^.^.....
...............
....^.^...^....
...............
...^.^...^.^...
...............
..^...^.....^..
...............
.^.^.^.^.^...^.
...............
```

Этот процесс продолжается, пока все тахионные лучи не достигнут расщепителя или не покинут коллектор:
```
.......S.......
.......|.......
......|^|......
......|.|......
.....|^|^|.....
.....|.|.|.....
....|^|^|^|....
....|.|.|.|....
...|^|^|||^|...
...|.|.|||.|...
..|^|^|||^|^|..
..|.|.|||.|.|..
.|^|||^||.||^|.
.|.|||.||.||.|.
|^|^|^|^|^|||^|
|.|.|.|.|.|||.|
```

Чтобы починить телепорт, вам сначала нужно понять свойства расщепления лучей в тахионном коллекторе. В этом примере тахионный луч разделяется в сумме 21 раз.

Проанализируйте вашу схему коллектора. **Сколько раз будет происходить расщепление луча?**

## --- Часть вторая ---
С завершённым анализом коллектора вы приступаете к ремонту телепортера. Однако, когда вы открываете боковую крышку телепортера, чтобы заменить сломанный коллектор, то с удивлением обнаруживаете, что это не классический тахионный коллектор — это **квантовый тахионный коллектор**.

В квантовом тахионном коллекторе посылается всего одна тахионная частица. Квантовая частица одновременно проходит и по левому, и по правому пути каждого встреченного расщепителя.

Поскольку это невозможно в классическом смысле, руководство рекомендует **многомировую интерпретацию** квантового расщепления тахионов: каждый раз, когда частица достигает расщепителя, **сама временная линия разделяется**.  
В одной линии времени частица пошла влево, в другой — вправо.

Чтобы исправить коллектор, вам нужно узнать **общее количество линий времени**, которые будут существовать после того, как частица завершит все возможные маршруты через коллектор.

В приведённом выше примере существует множество линий времени. Например, есть линия времени, где частица всегда шла влево:
```
.......S.......
.......|.......
......|^.......
......|........
.....|^.^......
.....|.........
....|^.^.^.....
....|..........
...|^.^...^....
...|...........
..|^.^...^.^...
..|............
.|^...^.....^..
.|.............
|^.^.^.^.^...^.
|..............
```

Есть линия времени, где частица чередовала движение влево и вправо на каждом расщепителе:
```
.......S.......
.......|.......
......|^.......
......|........
......^|^......
.......|.......
.....^|^.^.....
......|........
....^.^|..^....
.......|.......
...^.^.|.^.^...
.......|.......
..^...^|....^..
.......|.......
.^.^.^|^.^...^.
......|........
```

Есть линия времени, где частица приходит в ту же конечную точку, что и в предыдущем примере, но идёт туда совершенно другим путём:
```
.......S.......
.......|.......
......|^.......
......|........
.....|^.^......
.....|.........
....|^.^.^.....
....|..........
....^|^...^....
.....|.........
...^.^|..^.^...
......|........
..^..|^.....^..
.....|.........
.^.^.^|^.^...^.
......|........
```

В этом примере частица заканчивает на **40 различных линиях времени**.

**Примените многомировую интерпретацию квантового расщепления тахионов к вашей схеме коллектора.  
Сколько различных линий времени будет у одной тахионной частицы?**
